<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculatrice</title>

  <!-- STYLE – mise en forme simple et lisible -->
  <style>
    :root {
      --num-bg: #f1f1f1;/* Couleur de fond des nombres */
      --num-color: #333;/* Couleur du texte des nombres */
      --op-bg:  #4a8edd;/* Couleur de fond des opérateurs (+, -, *, /) */
      --eq-bg:  #28a745; /* Couleur de fond du bouton "=" (égal) */
      --clr-bg: #dc3545; /* Couleur de fond du bouton de réinitialisation (C/AC) */
    }

    body              { font-family: Arial, sans-serif; display: flex; justify-content: center; margin-top: 40px; }
    #app              { width: 260px; }

    /* Écran de la calculatrice */
    #ecran            { width: 100%; padding: 12px; font-size: 1.6rem; text-align: right;
                        border: 1px solid #ccc; margin-bottom: 10px; background:#fff; }

    /* Grille des boutons */
    .button           { display: grid; gap: 6px;
                        grid-template-columns: repeat(3, 1fr); /* 3 colonnes pour les chiffres */
                        grid-auto-rows: 60px; }

    /* Boutons génériques */
    button            { font-size: 1.4rem; cursor: pointer; border: none; border-radius: 4px; }

    /* Chiffres */
    .num              { background: var(--num-bg); color: var(--num-color); }
    .num:hover        { background: #e6e6e6; }

    /* Opérateurs */
    .ops              { background: var(--op-bg); color:#fff; }
    .ops:hover        { background: #3a78c2; }

    /* Bouton C et = (placés manuellement en grille) */
    #clear            { background: var(--clr-bg); color:#fff; grid-column: 1 / span 2; }
    #clear:hover      { background: #c82333; }

      #equal            { background: var(--eq-bg);  color:#fff; grid-column: 1 / span 3; }
      #equal:hover      { background: #218838; }
  </style>
</head>

<body>
  <div id="app">
    <!-- Écran -->
    <input id="ecran" type="text" value="" disabled>

    <!-- Clavier -->
    <div class="button">
      <!-- ligne chiffres – 0 placé en première colonne pour un effet “pavé” -->
      <button class="num">0</button>
      <button class="num">1</button><button class="num">2</button><button class="num">3</button>
      <button class="num">4</button><button class="num">5</button><button class="num">6</button>
      <button class="num">7</button><button class="num">8</button><button class="num">9</button>

      <!-- opérateurs -->
      <button class="ops">+</button>
      <button class="ops">-</button>
      <button class="ops">*</button>
      <button class="ops">/</button>

      <!-- effacer & égal -->
      <button id="clear">C</button>
      <button id="equal">=</button>
    </div>
  </div>

  <!-- SCRIPT -->
  <script>
    /* === Sélection des éléments === */
    const ecran     = document.getElementById("ecran");
    const nums      = document.querySelectorAll(".num");
    const ops       = document.querySelectorAll(".ops");
    const clearBtn  = document.getElementById("clear");
    const equalBtn  = document.getElementById("equal");

    /* === Variables d'état === */
    let operand1   = "";
    let operand2   = "";
    let operator   = "";
    let saisieDeux = false;

    /* === Gestion des chiffres === */
    nums.forEach(btn => {
      btn.addEventListener("click", () => {
        const chiffre = btn.textContent;
        if (!saisieDeux) {
          operand1 += chiffre;
          ecran.value = operand1;
        } else {
          operand2 += chiffre;
          ecran.value = operand2;
        }
      });
    });

    /* === Gestion des opérateurs === */
    ops.forEach(btn => {
      btn.addEventListener("click", () => {
        if (!operand1) return;            // on ne choisit pas d'opérateur sans premier nombre
        operator   = btn.textContent;
        saisieDeux = true;
      });
    });

    /* === Calcul === */
    equalBtn.addEventListener("click", () => {
      if (!operand1 || !operand2 || !operator) return;

      const a = Number(operand1);
      const b = Number(operand2);
      let res;

      switch (operator) {
        case "+": res = a + b; break;
        case "-": res = a - b; break;
        case "*": res = a * b; break;
        case "/":
          res = (b === 0) ? "Err div 0" : a / b;
          break;
      }
      ecran.value = res;

      // prépare une nouvelle opération
      operand1   = String(res);
      operand2   = "";
      operator   = "";
      saisieDeux = false;
    });

    /* === Effacer === */
    clearBtn.addEventListener("click", () => {
      operand1 = operand2 = operator = "";
      saisieDeux = false;
      ecran.value = "";
    });
  </script>
</body>
</html>
